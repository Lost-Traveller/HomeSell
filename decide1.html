<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Next Home Finder | MyHomeSellApp</title>
<!-- Leaflet CSS & JS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">

<style>
body {
  font-family: 'Open Sans', Arial, sans-serif;
  background:#f7fafd;
  margin:0;
  padding:0;
  color:#1b4e8a;
}

/* Container for all content */
.container {
  max-width: 1200px;
  margin: 0 auto;
}

/* ------------------ Navigation Styles ------------------ */

/* Smaller Main Nav Bar */
.main-nav {
  background: #fff;
  border-bottom: 1px solid #eaf2fb;
  padding: 0.3rem 0; /* Reduced padding for smaller height */
  font-family: 'Open Sans', Arial, sans-serif;
  font-size: 1.02rem;
}
.nav-links {
  display: flex;
  justify-content: flex-end;
  align-items: center;
  gap: 0.6em;
  max-width: 1200px;
  margin: 0 auto;
}
.nav-links a {
  display: inline-block;
  color: #1b4e8a;
  font-weight: 600;
  text-decoration: none;
  padding: 0.6em 1.15em;
  border-radius: 4px;
  transition: background 0.13s, color 0.13s;
}
.nav-links a.active,
.nav-links a:hover {
  background: #eaf2fb;
  color: #ff7f50;
}

/* Smaller Subnav Bar */
.subnav {
  background: #fff;
  padding: 0.2rem 0; /* Reduced padding for smaller height */
  border-bottom: 1px solid #eaf2fb;
  font-family: 'Open Sans', Arial, sans-serif;
}
.subnav-links {
  display: flex;
  justify-content: flex-end;
  align-items: center;
  gap: 0.5em;
  max-width: 1200px;
  margin: 0 auto;
}
.subnav-links a {
  display: inline-block;
  padding: 0.42em 1.1em;
  font-size: 1.02rem;
  font-weight: 600;
  color: #1b4e8a;
  background: #f7fafd;
  border-radius: 22px;
  text-decoration: none;
  transition: background 0.15s, color 0.15s, box-shadow 0.15s;
}
.subnav-links a.active,
.subnav-links a:hover {
  background: #1b4e8a;
  color: #fff;
  box-shadow: 0 2px 8px rgba(27,78,138,0.08);
}

/* ------------------ Main Content Styles ------------------ */
.content {
  margin-top: 1.5rem; /* Increased margin to give more space after navs */
  padding: 1rem;
  max-width: 1200px;
  margin-left: auto;
  margin-right: auto;
}

/* Slider styles */
.slider-container {
  width: 100%;
  max-width: 1200px;
  padding: 0 1rem;
  margin-bottom: 2rem;
}
.slider-label {
  font-size: 1.07rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 0.7rem;
  width: 20%;
}
input[type=range] {
  width: 95%;
}

/* Map styles (keep height reasonable) */
#map {
  height: 500px;
  width: 100%;
  margin: 1rem 0;
  border-radius: 12px;
}

/* Info card styles */
#info {
  margin-top: 1rem;
  max-width: 1200px;
  width: 95%;
  margin-left: auto;
  margin-right: auto;
  padding: 1rem;
}
#info .card {
  background: #fff;
  padding: 1rem;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.05);
  font-family: 'Open Sans', sans-serif;
  font-size: 1rem;
  color: #333;
  line-height: 1.4;
}
#info h2 {
  margin-top: 0;
  margin-bottom: 0.5rem;
  font-size: 1.2rem;
  color: #0077cc;
}
#info p {
  margin: 0.3rem 0;
}

/* Footer styles */
footer {
  background: #222;
  color: #ccc;
  text-align: center;
  padding: 1rem;
  margin-top: auto;
}
footer a {
  color: #ccc;
  text-decoration: none;
  margin: 0 0.5em;
}
footer a:hover {
  text-decoration: underline;
}

/* Responsive adjustments */
@media(max-width: 700px){
  #map { height:auto; }
  .nav-links, .subnav-links {
    flex-wrap: wrap;
    gap: 0.2em;
    justify-content: flex-start;
  }
}
</style>
</head>
<body>

<div class="container">

  <!-- Main Navigation -->
  <nav class="main-nav">
    <div class="nav-links">
      <a href="decide.html" class="">Decide</a>
      <a href="prepare1.html">Prepare</a>
      <a href="market1.html">Market</a>
      <a href="list1.html">List</a>
      <a href="openhome1.html">Open Home</a>
      <a href="negotiate1.html">Negotiate</a>
      <a href="sell1.html">Sell</a>
      <a href="move1.html">Move</a>
    </div>
  </nav>

  <!-- Sub Navigation -->
  <nav class="subnav">
    <div class="subnav-links">
      <a href="decide1.html">decide1</a>
      <a href="decide2.html" class="active">decide2</a>
      <a href="decide3.html">decide3</a>
      <a href="decide4.html">decide4</a>
      <a href="decide5.html">decide5</a>
    </div>
  </nav>

  <!-- Main Content -->
  <div class="content">
    <main>
      <h2>Next Home Finder</h2>
      <div class="intro">
        Enter your expected sale price to explore where your money goes furthest in Wellington and the wider region. Compare suburbs for size, lifestyle, average income, and annual rates — all visualized on the map.
      </div>

      <!-- Slider -->
      <div class="slider-container">
        <label for="salePrice">Expected Sale Price ($NZD):</label>
        <input type="range" id="salePrice" min="300000" max="3000000" step="50000" value="900000">
        <div class="slider-label">Value: <span id="priceValue"></span></div>
      </div>

      <!-- Map -->
      <div id="map"></div>

      <!-- Info -->
      <div id="info"></div>
    </main>
  </div>

  <!-- Footer -->
  <footer>
    <a href="profile.html">Profile</a>|
    <a href="pricing.html">Pricing</a>|
    <a href="terms.html">Terms</a>|
    <a href="privacy.html">Privacy</a>
    <p>© 2024 MyHomeSellApp</p>
  </footer>
</div>

<!-- Leaflet Map Script -->
<script>
  // Example suburbs data (keep or replace with real data)
const suburbs = [
  {
    name: "Newtown",
    coords: [-41.3126, 174.7796],
    median: 910000,
    description: "Lively, urban and diverse. Close to hospital, buses. Popular with families & professionals.",
    size: "2-3 bed, townhouses & villas",
    avgIncome: 60500,
    avgRates: 3450
  },
  {
    name: "Upper Hutt",
    coords: [-41.1242, 175.0701],
    median: 790000,
    description: "More space, big parks, good schools. Easy train & car commute.",
    size: "3-4 bed, houses",
    avgIncome: 71000,
    avgRates: 3200
  },
  // ... (add other suburbs as needed)
];

// Initialize map
const map = L.map('map').setView([-41.2865, 174.7762], 11);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  attribution: '© OpenStreetMap'
}).addTo(map);
let markers = [];

function updateMap() {
  markers.forEach(m => map.removeLayer(m));
  markers = [];

  const price = parseInt(document.getElementById('salePrice').value, 10) || 0;
  document.getElementById('priceValue').textContent = `$${price.toLocaleString()}`;

  const matches = suburbs.filter(s => s.median <= price);
  if(matches.length === 0){
    document.getElementById('info').innerHTML = "<div style='padding:1rem; background:#fff; border-radius:8px; box-shadow:0 2px 4px rgba(0,0,0,0.05);'>No matches found. Try increasing your sale price or expanding your search area.</div>";
    return;
  }

  matches.forEach(sub => {
    const m = L.marker(sub.coords).addTo(map);
    m.bindPopup(`<b>${sub.name}</b><br>Median: $${sub.median.toLocaleString()}`);
    m.on('click', () => showInfo(sub));
    markers.push(m);
  });
  map.setView(matches[0].coords, 12);
  showInfo(matches[0]);
}

function showInfo(sub) {
  document.getElementById('info').innerHTML = `
    <div style="background:#f7fafd;border-radius:8px;padding:1rem; box-shadow:0 2px 4px rgba(0,0,0,0.03);">
      <h2 style="margin-top:0;">${sub.name}</h2>
      <div style="margin-bottom:0.7rem;">${sub.description}</div>
      <p><strong>Median Price:</strong> $${sub.median.toLocaleString()}</p>
      <p><strong>Typical Size:</strong> ${sub.size}</p>
      <p><strong>Average Income:</strong> $${sub.avgIncome.toLocaleString()} per year</p>
      <p><strong>Average Annual Rates:</strong> $${sub.avgRates.toLocaleString()}</p>
    </div>
  `;
}

updateMap();
document.getElementById('salePrice').addEventListener('input', updateMap);
</script>

</body>
</html>
